## Teambition/Thoughts/前端开发 2017.7.10 - 今
Thoughts 产品的前端开发，技术重心主要在编辑器与协同编辑的技术攻坚上，同时参与了日常的需求评审、代码 review、bug修复、代码重构、技术分享、新人培养等工作。

### 编辑器底层框架的替换

- 原有基于 Draft.js 开发的编辑器，难以构建复杂的嵌套结构，比如表格、讨论功能；底层数据模型也无法支持实时协同编辑；故将底层框架替换为 Slate.js，并对部分功能进行了重构以及渲染优化，为后续功能开发提供了坚实的基础；

- 使用插件的方式组织代码，将代码拆分成小的、可复用的模块，每个模块职责清晰，易于理解和维护；

- 编辑器更新粒度更细腻，尽可能避免了编辑器的整体重绘，在长文本段落的情况下依旧可以保持流畅的体验；代码块高亮每行为独立的渲染单元，相比之前整体渲染的方式性能有明显的提升；

- 将原有的业务功能，在 Slate 框架下重新实现，包括各种行内样式、段落类型、表格、Popover、快速插入、Markdown 语法、快捷键、特殊行为定制等；

- 新增 Schema 设计，通过声明一系列的 Rule，约束文档的内容的结构和节点嵌套关系，比如最后一个段落的类型，自动合并相邻的列表等；能够强制保证编辑器中内容的合法性，并提供了更好的交互体验和更多的可能性；

- 对复制粘贴进行了深层次的定制，能够很好的处理跨浏览器的、通过 Popover 菜单、其他富文本编辑器、html相关的复制粘贴行为；

- 通过阅读 Slate 源码，解决了其自身在输入法方面的光标和兼容性的问题，修复了 Schema 和 unwrapBock 相关 bug；

- 对旧的 Draft 相关数据模型做了很好的兼容和转换，保证用户能够平滑过渡到全新的编辑器使用上；

### 表格功能增强

- 设计了 Table、Row、Cell 嵌套的结构和树形数据模型，赋予了单元格内容更强大的功能，不局限于原有的纯文本的形式，可以支持多种行内样式和段落类型，提供了更好的编辑体验；

- 表格内光标和键盘响应行为需要做较多定制化的工作，比如方向键切换单元格，全选单元格等；

- 单元格多选与原生差别很大，需要完全手动模拟出多选的行为表现；

- 支持了在单选、多选、正常编辑三种状态下的复制粘贴；


### 协同编辑技术攻坚

- 基于 CRDT 算法库 Automerge，对富文本编辑器的数据进行建模，完成了 Slate Operation 和 Automerge Change 之间的转换，在不同用户基于同一版本产生不同操作的情况下，实现了字符级别的冲突合并；

- 采用 Socket 进行数据同步，与后端一起设计了相关通信协议；


### 迭代业务开发
- 参与日常迭代中的多个业务功能开发，如快速插入、增加关联类型、全局搜索、文件与文件夹、移动端sdk、埋点等。

## 专业技能
- 熟练掌握 JS、HTML5、CSS3 技术，熟悉 React 及其相关框架，熟悉 RxJS 和 TypeScript，了解 Node.js 中后台开发；
- 熟悉 Webpack 配置、Chrome 调试、Fiddler 和基于 Git 的开发流程；
- 对 TCP、HTTP 等⽹络协议有一定了解;
- 有良好的编程习惯和思维，对面向对象设计、函数型编程、代码重构、测试和部署有较好的理解，有开源项目贡献经历;
